/*! Analyze Optometry Data v1.0.6
* Author: tanglv <tangchaofalv@163.com>
* Info: https://www.npmjs.com/package/aod
* Date: 2022-02-11 10:01
* Released under the GNU license
* The following device data are now supported for parsing：
[iolmaster_500,iolmaster_700,jlp_crk8800,lsj_company,nidek_al_scan,nidek_ark1,nidek_lm600p,nidek_nt510,nidek_rt5100,tomey_rc_5000,topcon_ct_800,topcon_cv_5000,topcon_kr_1,visionscreener,xb_supore]
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).AnalysisDeviceData=t()}(this,(function(){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function createCommonjsModule(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return commonjsRequire(e,null==t?n.path:t)}},n.exports),n.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var _entityMap,entityMap=(_entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",auml:"ä",Aring:"Å",aring:"å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",ouml:"ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã"},_defineProperty(_entityMap,"auml","ä"),_defineProperty(_entityMap,"aring","å"),_defineProperty(_entityMap,"aelig","æ"),_defineProperty(_entityMap,"ccedil","ç"),_defineProperty(_entityMap,"egrave","è"),_defineProperty(_entityMap,"eacute","é"),_defineProperty(_entityMap,"ecirc","ê"),_defineProperty(_entityMap,"euml","ë"),_defineProperty(_entityMap,"igrave","ì"),_defineProperty(_entityMap,"iacute","í"),_defineProperty(_entityMap,"icirc","î"),_defineProperty(_entityMap,"iuml","ï"),_defineProperty(_entityMap,"eth","ð"),_defineProperty(_entityMap,"ntilde","ñ"),_defineProperty(_entityMap,"ograve","ò"),_defineProperty(_entityMap,"oacute","ó"),_defineProperty(_entityMap,"ocirc","ô"),_defineProperty(_entityMap,"otilde","õ"),_defineProperty(_entityMap,"ouml","ö"),_defineProperty(_entityMap,"oslash","ø"),_defineProperty(_entityMap,"ugrave","ù"),_defineProperty(_entityMap,"uacute","ú"),_defineProperty(_entityMap,"ucirc","û"),_defineProperty(_entityMap,"uuml","ü"),_defineProperty(_entityMap,"yacute","ý"),_defineProperty(_entityMap,"thorn","þ"),_defineProperty(_entityMap,"yuml","ÿ"),_defineProperty(_entityMap,"nbsp"," "),_defineProperty(_entityMap,"iexcl","¡"),_defineProperty(_entityMap,"cent","¢"),_defineProperty(_entityMap,"pound","£"),_defineProperty(_entityMap,"curren","¤"),_defineProperty(_entityMap,"yen","¥"),_defineProperty(_entityMap,"brvbar","¦"),_defineProperty(_entityMap,"sect","§"),_defineProperty(_entityMap,"uml","¨"),_defineProperty(_entityMap,"copy","©"),_defineProperty(_entityMap,"ordf","ª"),_defineProperty(_entityMap,"laquo","«"),_defineProperty(_entityMap,"not","¬"),_defineProperty(_entityMap,"shy","­­"),_defineProperty(_entityMap,"reg","®"),_defineProperty(_entityMap,"macr","¯"),_defineProperty(_entityMap,"deg","°"),_defineProperty(_entityMap,"plusmn","±"),_defineProperty(_entityMap,"sup2","²"),_defineProperty(_entityMap,"sup3","³"),_defineProperty(_entityMap,"acute","´"),_defineProperty(_entityMap,"micro","µ"),_defineProperty(_entityMap,"para","¶"),_defineProperty(_entityMap,"middot","·"),_defineProperty(_entityMap,"cedil","¸"),_defineProperty(_entityMap,"sup1","¹"),_defineProperty(_entityMap,"ordm","º"),_defineProperty(_entityMap,"raquo","»"),_defineProperty(_entityMap,"frac14","¼"),_defineProperty(_entityMap,"frac12","½"),_defineProperty(_entityMap,"frac34","¾"),_defineProperty(_entityMap,"iquest","¿"),_defineProperty(_entityMap,"times","×"),_defineProperty(_entityMap,"divide","÷"),_defineProperty(_entityMap,"forall","∀"),_defineProperty(_entityMap,"part","∂"),_defineProperty(_entityMap,"exist","∃"),_defineProperty(_entityMap,"empty","∅"),_defineProperty(_entityMap,"nabla","∇"),_defineProperty(_entityMap,"isin","∈"),_defineProperty(_entityMap,"notin","∉"),_defineProperty(_entityMap,"ni","∋"),_defineProperty(_entityMap,"prod","∏"),_defineProperty(_entityMap,"sum","∑"),_defineProperty(_entityMap,"minus","−"),_defineProperty(_entityMap,"lowast","∗"),_defineProperty(_entityMap,"radic","√"),_defineProperty(_entityMap,"prop","∝"),_defineProperty(_entityMap,"infin","∞"),_defineProperty(_entityMap,"ang","∠"),_defineProperty(_entityMap,"and","∧"),_defineProperty(_entityMap,"or","∨"),_defineProperty(_entityMap,"cap","∩"),_defineProperty(_entityMap,"cup","∪"),_defineProperty(_entityMap,"int","∫"),_defineProperty(_entityMap,"there4","∴"),_defineProperty(_entityMap,"sim","∼"),_defineProperty(_entityMap,"cong","≅"),_defineProperty(_entityMap,"asymp","≈"),_defineProperty(_entityMap,"ne","≠"),_defineProperty(_entityMap,"equiv","≡"),_defineProperty(_entityMap,"le","≤"),_defineProperty(_entityMap,"ge","≥"),_defineProperty(_entityMap,"sub","⊂"),_defineProperty(_entityMap,"sup","⊃"),_defineProperty(_entityMap,"nsub","⊄"),_defineProperty(_entityMap,"sube","⊆"),_defineProperty(_entityMap,"supe","⊇"),_defineProperty(_entityMap,"oplus","⊕"),_defineProperty(_entityMap,"otimes","⊗"),_defineProperty(_entityMap,"perp","⊥"),_defineProperty(_entityMap,"sdot","⋅"),_defineProperty(_entityMap,"Alpha","Α"),_defineProperty(_entityMap,"Beta","Β"),_defineProperty(_entityMap,"Gamma","Γ"),_defineProperty(_entityMap,"Delta","Δ"),_defineProperty(_entityMap,"Epsilon","Ε"),_defineProperty(_entityMap,"Zeta","Ζ"),_defineProperty(_entityMap,"Eta","Η"),_defineProperty(_entityMap,"Theta","Θ"),_defineProperty(_entityMap,"Iota","Ι"),_defineProperty(_entityMap,"Kappa","Κ"),_defineProperty(_entityMap,"Lambda","Λ"),_defineProperty(_entityMap,"Mu","Μ"),_defineProperty(_entityMap,"Nu","Ν"),_defineProperty(_entityMap,"Xi","Ξ"),_defineProperty(_entityMap,"Omicron","Ο"),_defineProperty(_entityMap,"Pi","Π"),_defineProperty(_entityMap,"Rho","Ρ"),_defineProperty(_entityMap,"Sigma","Σ"),_defineProperty(_entityMap,"Tau","Τ"),_defineProperty(_entityMap,"Upsilon","Υ"),_defineProperty(_entityMap,"Phi","Φ"),_defineProperty(_entityMap,"Chi","Χ"),_defineProperty(_entityMap,"Psi","Ψ"),_defineProperty(_entityMap,"Omega","Ω"),_defineProperty(_entityMap,"alpha","α"),_defineProperty(_entityMap,"beta","β"),_defineProperty(_entityMap,"gamma","γ"),_defineProperty(_entityMap,"delta","δ"),_defineProperty(_entityMap,"epsilon","ε"),_defineProperty(_entityMap,"zeta","ζ"),_defineProperty(_entityMap,"eta","η"),_defineProperty(_entityMap,"theta","θ"),_defineProperty(_entityMap,"iota","ι"),_defineProperty(_entityMap,"kappa","κ"),_defineProperty(_entityMap,"lambda","λ"),_defineProperty(_entityMap,"mu","μ"),_defineProperty(_entityMap,"nu","ν"),_defineProperty(_entityMap,"xi","ξ"),_defineProperty(_entityMap,"omicron","ο"),_defineProperty(_entityMap,"pi","π"),_defineProperty(_entityMap,"rho","ρ"),_defineProperty(_entityMap,"sigmaf","ς"),_defineProperty(_entityMap,"sigma","σ"),_defineProperty(_entityMap,"tau","τ"),_defineProperty(_entityMap,"upsilon","υ"),_defineProperty(_entityMap,"phi","φ"),_defineProperty(_entityMap,"chi","χ"),_defineProperty(_entityMap,"psi","ψ"),_defineProperty(_entityMap,"omega","ω"),_defineProperty(_entityMap,"thetasym","ϑ"),_defineProperty(_entityMap,"upsih","ϒ"),_defineProperty(_entityMap,"piv","ϖ"),_defineProperty(_entityMap,"OElig","Œ"),_defineProperty(_entityMap,"oelig","œ"),_defineProperty(_entityMap,"Scaron","Š"),_defineProperty(_entityMap,"scaron","š"),_defineProperty(_entityMap,"Yuml","Ÿ"),_defineProperty(_entityMap,"fnof","ƒ"),_defineProperty(_entityMap,"circ","ˆ"),_defineProperty(_entityMap,"tilde","˜"),_defineProperty(_entityMap,"ensp"," "),_defineProperty(_entityMap,"emsp"," "),_defineProperty(_entityMap,"thinsp"," "),_defineProperty(_entityMap,"zwnj","‌"),_defineProperty(_entityMap,"zwj","‍"),_defineProperty(_entityMap,"lrm","‎"),_defineProperty(_entityMap,"rlm","‏"),_defineProperty(_entityMap,"ndash","–"),_defineProperty(_entityMap,"mdash","—"),_defineProperty(_entityMap,"lsquo","‘"),_defineProperty(_entityMap,"rsquo","’"),_defineProperty(_entityMap,"sbquo","‚"),_defineProperty(_entityMap,"ldquo","“"),_defineProperty(_entityMap,"rdquo","”"),_defineProperty(_entityMap,"bdquo","„"),_defineProperty(_entityMap,"dagger","†"),_defineProperty(_entityMap,"Dagger","‡"),_defineProperty(_entityMap,"bull","•"),_defineProperty(_entityMap,"hellip","…"),_defineProperty(_entityMap,"permil","‰"),_defineProperty(_entityMap,"prime","′"),_defineProperty(_entityMap,"Prime","″"),_defineProperty(_entityMap,"lsaquo","‹"),_defineProperty(_entityMap,"rsaquo","›"),_defineProperty(_entityMap,"oline","‾"),_defineProperty(_entityMap,"euro","€"),_defineProperty(_entityMap,"trade","™"),_defineProperty(_entityMap,"larr","←"),_defineProperty(_entityMap,"uarr","↑"),_defineProperty(_entityMap,"rarr","→"),_defineProperty(_entityMap,"darr","↓"),_defineProperty(_entityMap,"harr","↔"),_defineProperty(_entityMap,"crarr","↵"),_defineProperty(_entityMap,"lceil","⌈"),_defineProperty(_entityMap,"rceil","⌉"),_defineProperty(_entityMap,"lfloor","⌊"),_defineProperty(_entityMap,"rfloor","⌋"),_defineProperty(_entityMap,"loz","◊"),_defineProperty(_entityMap,"spades","♠"),_defineProperty(_entityMap,"clubs","♣"),_defineProperty(_entityMap,"hearts","♥"),_defineProperty(_entityMap,"diams","♦"),_entityMap),entities={entityMap:entityMap},nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function XMLReader(){}function _parse(e,t,n,a,i){function r(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function o(t){if(t>f){var n=e.substring(f,t).replace(/&#?\w+;/g,r);u&&s(f),a.characters(n,0,t-f),f=t}}function s(t,n){for(;t>=l&&(n=p.exec(e));)d=n.index,l=d+n[0].length,u.lineNumber++;u.columnNumber=t-d+1}for(var d=0,l=0,p=/.*(?:\r\n?|\n)|.*$/g,u=a.locator,m=[{currentNSMap:t}],c={},f=0;;){try{var _=e.indexOf("<",f);if(_<0){if(!e.substr(f).match(/^\s*$/)){var y=a.doc,N=y.createTextNode(e.substr(f));y.appendChild(N),a.currentElement=N}return}switch(_>f&&o(_),e.charAt(_+1)){case"/":var g=e.indexOf(">",_+3),h=e.substring(_+2,g),E=m.pop();g<0?(h=e.substring(_+2).replace(/[\s<].*/,""),i.error("end tag name: "+h+" is not complete:"+E.tagName),g=_+1+h.length):h.match(/\s</)&&(h=h.replace(/[\s<].*/,""),i.error("end tag name: "+h+" maybe not complete"),g=_+1+h.length);var x=E.localNSMap,O=E.tagName==h;if(O||E.tagName&&E.tagName.toLowerCase()==h.toLowerCase()){if(a.endElement(E.uri,E.localName,h),x)for(var v in x)a.endPrefixMapping(v);O||i.fatalError("end tag name: "+h+" is not match the current start tagName:"+E.tagName)}else m.push(E);g++;break;case"?":u&&s(_),g=parseInstruction(e,_,a);break;case"!":u&&s(_),g=parseDCC(e,_,a,i);break;default:u&&s(_);var T=new ElementAttributes,M=m[m.length-1].currentNSMap,D=(g=parseElementStartPart(e,_,T,M,r,i),T.length);if(!T.closed&&fixSelfClosed(e,g,T.tagName,c)&&(T.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),u&&D){for(var S=copyLocator(u,{}),A=0;A<D;A++){var P=T[A];s(P.offset),P.locator=copyLocator(u,{})}a.locator=S,appendElement(T,a,M)&&m.push(T),a.locator=u}else appendElement(T,a,M)&&m.push(T);"http://www.w3.org/1999/xhtml"!==T.uri||T.closed?g++:g=parseHtmlSpecialContent(e,g,T.tagName,r,a)}}catch(e){i.error("element parse error: "+e),g=-1}g>f?f=g:o(Math.max(_,f)+1)}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,n,a,i,r){for(var o,s=++t,d=S_TAG;;){var l=e.charAt(s);switch(l){case"=":if(d===S_ATTR)o=e.slice(t,s),d=S_EQ;else{if(d!==S_ATTR_SPACE)throw new Error("attribute equal must after attrName");d=S_EQ}break;case"'":case'"':if(d===S_EQ||d===S_ATTR){if(d===S_ATTR&&(r.warning('attribute value must after "="'),o=e.slice(t,s)),t=s+1,!((s=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match");p=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(o,p,t-1),d=S_ATTR_END}else{if(d!=S_ATTR_NOQUOT_VALUE)throw new Error('attribute value must after "="');p=e.slice(t,s).replace(/&#?\w+;/g,i),n.add(o,p,t),r.warning('attribute "'+o+'" missed start quot('+l+")!!"),t=s+1,d=S_ATTR_END}break;case"/":switch(d){case S_TAG:n.setTagName(e.slice(t,s));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:d=S_TAG_CLOSE,n.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return r.error("unexpected end of input"),d==S_TAG&&n.setTagName(e.slice(t,s)),s;case">":switch(d){case S_TAG:n.setTagName(e.slice(t,s));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:"/"===(p=e.slice(t,s)).slice(-1)&&(n.closed=!0,p=p.slice(0,-1));case S_ATTR_SPACE:d===S_ATTR_SPACE&&(p=o),d==S_ATTR_NOQUOT_VALUE?(r.warning('attribute "'+p+'" missed quot(")!!'),n.add(o,p.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===a[""]&&p.match(/^(?:disabled|checked|selected)$/i)||r.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),n.add(p,p,t));break;case S_EQ:throw new Error("attribute value missed!!")}return s;case"":l=" ";default:if(l<=" ")switch(d){case S_TAG:n.setTagName(e.slice(t,s)),d=S_TAG_SPACE;break;case S_ATTR:o=e.slice(t,s),d=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var p=e.slice(t,s).replace(/&#?\w+;/g,i);r.warning('attribute "'+p+'" missed quot(")!!'),n.add(o,p,t);case S_ATTR_END:d=S_TAG_SPACE}else switch(d){case S_ATTR_SPACE:n.tagName;"http://www.w3.org/1999/xhtml"===a[""]&&o.match(/^(?:disabled|checked|selected)$/i)||r.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),n.add(o,o,t),t=s,d=S_ATTR;break;case S_ATTR_END:r.warning('attribute space is required"'+o+'"!!');case S_TAG_SPACE:d=S_ATTR,t=s;break;case S_EQ:d=S_ATTR_NOQUOT_VALUE,t=s;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function appendElement(e,t,n){for(var a=e.tagName,i=null,r=e.length;r--;){var o=e[r],s=o.qName,d=o.value;if((m=s.indexOf(":"))>0)var l=o.prefix=s.slice(0,m),p=s.slice(m+1),u="xmlns"===l&&p;else p=s,l=null,u="xmlns"===s&&"";o.localName=p,!1!==u&&(null==i&&(i={},_copy(n,n={})),n[u]=i[u]=d,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(u,d))}for(r=e.length;r--;){(l=(o=e[r]).prefix)&&("xml"===l&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(o.uri=n[l||""]))}var m;(m=a.indexOf(":"))>0?(l=e.prefix=a.slice(0,m),p=e.localName=a.slice(m+1)):(l=null,p=e.localName=a);var c=e.uri=n[l||""];if(t.startElement(c,p,a,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(c,p,a),i)for(l in i)t.endPrefixMapping(l)}function parseHtmlSpecialContent(e,t,n,a,i){if(/^(?:script|textarea)$/i.test(n)){var r=e.indexOf("</"+n+">",t),o=e.substring(t+1,r);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),r):(o=o.replace(/&#?\w+;/g,a),i.characters(o,0,o.length),r)}return t+1}function fixSelfClosed(e,t,n,a){var i=a[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),a[n]=i),i<t}function _copy(e,t){for(var n in e)t[n]=e[n]}function parseDCC(e,t,n,a){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(a.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var r=split(e,t),o=r.length;if(o>1&&/!doctype/i.test(r[0][0])){var s=r[1][0],d=o>3&&/^public$/i.test(r[2][0])&&r[3][0],l=o>4&&r[4][0],p=r[o-1];return n.startDTD(s,d&&d.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),p.index+p[0].length}}return-1}function parseInstruction(e,t,n){var a=e.indexOf("?>",t);if(a){var i=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),a+2}return-1}return-1}function ElementAttributes(e){}function split(e,t){var n,a=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(a.push(n),n[1])return a}XMLReader.prototype={parse:function(e,t,n){var a=this.domBuilder;a.startDocument(),_copy(t,t={}),_parse(e,t,n,a,this.errorHandler),a.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!tagNamePattern.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};var XMLReader_1=XMLReader,sax={XMLReader:XMLReader_1};function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){var n=e.prototype;if(!(n instanceof t)){var a=function(){};a.prototype=t.prototype,copy(n,a=new a),e.prototype=n=a}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,a){if(a?t[_findNodeIndex(t,a)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(a&&_onRemoveAttribute(i,e,a),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var a=_findNodeIndex(t,n);if(!(a>=0))throw DOMException(NOT_FOUND_ERR,new Error(e.tagName+"@"+n));for(var i=t.length-1;a<i;)t[a]=t[++a];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(_visitNode(e,t))return!0}while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,a){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var a=t.childNodes;if(n)a[a.length++]=n;else{for(var i=t.firstChild,r=0;i;)a[r++]=i,i=i.nextSibling;a.length=r}}}function _removeChild(e,t){var n=t.previousSibling,a=t.nextSibling;return n?n.nextSibling=a:e.firstChild=a,a?a.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var a=t.parentNode;if(a&&a.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var o=n?n.previousSibling:e.lastChild;i.previousSibling=o,r.nextSibling=n,o?o.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do{i.parentNode=e}while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var a=e.lastChild;n.removeChild(t);a=e.lastChild}a=e.lastChild;return t.parentNode=e,t.previousSibling=a,t.nextSibling=null,a?a.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(e,t){var n=[],a=9==this.nodeType&&this.documentElement||this,i=a.prefix,r=a.namespaceURI;if(r&&null==i&&null==(i=a.lookupPrefix(r)))var o=[{namespace:r,prefix:null}];return serializeToString(this,n,e,t,o),n.join("")}function needNamespaceDefine(e,t,n){var a=e.prefix||"",i=e.namespaceURI;if(!a&&!i)return!1;if("xml"===a&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var r=n.length;r--;){var o=n[r];if(o.prefix==a)return o.namespace!=i}return!0}function serializeToString(e,t,n,a,i){if(a){if(!(e=a(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case ELEMENT_NODE:i||(i=[]);i.length;var r=e.attributes,o=r.length,s=e.firstChild,d=e.tagName;n=htmlns===e.namespaceURI||n,t.push("<",d);for(var l=0;l<o;l++){"xmlns"==(p=r.item(l)).prefix?i.push({prefix:p.localName,namespace:p.value}):"xmlns"==p.nodeName&&i.push({prefix:"",namespace:p.value})}for(l=0;l<o;l++){var p;if(needNamespaceDefine(p=r.item(l),n,i)){var u=p.prefix||"",m=p.namespaceURI,c=u?" xmlns:"+u:" xmlns";t.push(c,'="',m,'"'),i.push({prefix:u,namespace:m})}serializeToString(p,t,n,a,i)}if(needNamespaceDefine(e,n,i)){u=e.prefix||"",m=e.namespaceURI,c=u?" xmlns:"+u:" xmlns";t.push(c,'="',m,'"'),i.push({prefix:u,namespace:m})}if(s||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(d)){if(t.push(">"),n&&/^script$/i.test(d))for(;s;)s.data?t.push(s.data):serializeToString(s,t,n,a,i),s=s.nextSibling;else for(;s;)serializeToString(s,t,n,a,i),s=s.nextSibling;t.push("</",d,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(s=e.firstChild;s;)serializeToString(s,t,n,a,i),s=s.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("\x3c!--",e.data,"--\x3e");case DOCUMENT_TYPE_NODE:var f=e.publicId,_=e.systemId;if(t.push("<!DOCTYPE ",e.name),f)t.push(' PUBLIC "',f),_&&"."!=_&&t.push('" "',_),t.push('">');else if(_&&"."!=_)t.push(' SYSTEM "',_,'">');else{var y=e.internalSubset;y&&t.push(" [",y,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function _importNode(e,t,n){var a;switch(t.nodeType){case ELEMENT_NODE:(a=t.cloneNode(!1)).ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(a||(a=t.cloneNode(!1)),a.ownerDocument=e,a.parentNode=null,n)for(var i=t.firstChild;i;)a.appendChild(_importNode(e,i,n)),i=i.nextSibling;return a}function _cloneNode(e,t,n){var a=new t.constructor;for(var i in t){var r=t[i];"object"!=_typeof(r)&&r!=a[i]&&(a[i]=r)}switch(t.childNodes&&(a.childNodes=new NodeList),a.ownerDocument=e,a.nodeType){case ELEMENT_NODE:var o=t.attributes,s=a.attributes=new NamedNodeMap,d=o.length;s._ownerElement=a;for(var l=0;l<d;l++)a.setAttributeNode(_cloneNode(e,o.item(l),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var p=t.firstChild;p;)a.appendChild(_cloneNode(e,p,n)),p=p.nextSibling;return a}function __set__(e,t,n){e[t]=n}DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],a=0;a<this.length;a++)serializeToString(this[a],n,e,t);return n.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var a=this[n];if(a.localName==t&&a.namespaceURI==e)return a}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var a=new Document;if(a.implementation=this,a.childNodes=new NodeList,a.doctype=n,n&&a.appendChild(n),t){var i=a.createElementNS(e,t);a.appendChild(i)}return a},createDocumentType:function(e,t,n){var a=new DocumentType;return a.name=e,a.nodeName=e,a.publicId=t,a.systemId=n,a}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return _cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var a in n)if(n[a]==e)return a;t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var a=n.nextSibling;this.insertBefore(n,t),n=a}return e}return null==this.documentElement&&e.nodeType==ELEMENT_NODE&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return _importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,(function(n){if(n.nodeType==ELEMENT_NODE&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=new RegExp("(^|\\s)".concat(e,"(\\s|$)"));return new LiveNodeList(this,(function(e){var n=[];return _visitNode(e.documentElement,(function(a){a!==e&&a.nodeType==ELEMENT_NODE&&t.test(a.getAttribute("class"))&&n.push(a)})),n}))},createElement:function(e){var t=new Element;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList,(t.attributes=new NamedNodeMap)._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,a=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==a.length?(n.prefix=a[0],n.localName=a[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,a=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==a.length?(n.prefix=a[0],n.localName=a[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var a=this.ownerDocument.createAttributeNS(e,t);a.value=a.nodeValue=""+n,this.setAttributeNode(a)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,(function(t){var n=[];return _visitNode(t,(function(a){a===t||a.nodeType!=ELEMENT_NODE||"*"!==e&&a.tagName!=e||n.push(a)})),n}))},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,(function(n){var a=[];return _visitNode(n,(function(i){i===n||i.nodeType!==ELEMENT_NODE||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||a.push(i)})),a}))}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var a=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling),a}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e,t,n){return nodeSerializeToString.call(e,t,n)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){var getTextContent=function e(t){switch(t.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n}}}catch(e){}var Node_1=Node,DOMImplementation_1=DOMImplementation,XMLSerializer_1=XMLSerializer,dom={Node:Node_1,DOMImplementation:DOMImplementation_1,XMLSerializer:XMLSerializer_1},domParser=createCommonjsModule((function(e,t){function n(e){this.options=e||{locator:{}}}function a(){this.cdata=!1}function i(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function r(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function o(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var n=this.options,i=new d,o=n.domBuilder||new a,s=n.errorHandler,l=n.locator,p=n.xmlns||{},u=/\/x?html?$/.test(t),m=u?entities.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&o.setDocumentLocator(l),i.errorHandler=function(e,t,n){if(!e){if(t instanceof a)return t;e=t}var i={},o=e instanceof Function;function s(t){var a=e[t];!a&&o&&(a=2==e.length?function(n){e(t,n)}:e),i[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+r(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),i}(s,o,l),i.domBuilder=n.domBuilder||o,u&&(p[""]="http://www.w3.org/1999/xhtml"),p.xml=p.xml||"http://www.w3.org/XML/1998/namespace",e?i.parse(e,p,m):i.errorHandler.error("invalid doc source"),o.doc},a.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,a){var r=this.doc,o=r.createElementNS(e,n||t),d=a.length;s(this,o),this.currentElement=o,this.locator&&i(this.locator,o);for(var l=0;l<d;l++){e=a.getURI(l);var p=a.getValue(l),u=(n=a.getQName(l),r.createAttributeNS(e,n));this.locator&&i(a.getLocator(l),u),u.value=u.nodeValue=p,o.setAttributeNode(u)}},endElement:function(e,t,n){var a=this.currentElement;a.tagName;this.currentElement=a.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&i(this.locator,n),s(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=o.apply(this,arguments)){if(this.cdata)var a=this.doc.createCDATASection(e);else a=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(a):/^\s*$/.test(e)&&this.doc.appendChild(a),this.locator&&i(this.locator,a)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=o.apply(this,arguments);var a=this.doc.createComment(e);this.locator&&i(this.locator,a),s(this,a)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var a=this.doc.implementation;if(a&&a.createDocumentType){var r=a.createDocumentType(e,t,n);this.locator&&i(this.locator,r),s(this,r)}},warning:function(e){console.warn("[xmldom warning]\t"+e,r(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,r(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,r(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){a.prototype[e]=function(){return null}}));var d=sax.XMLReader,l=t.DOMImplementation=dom.DOMImplementation;t.XMLSerializer=dom.XMLSerializer,t.DOMParser=n})),analyzeRNFmt,analyzeJSONFmt,analyzeXMLFmt;function buildData(e,t,n){var a="",i=t,r="";for(var o in void 0===e[0].keepSpace&&(i=i.replace(/[　+ +]/g,"")),!0===e[0].trim&&(i=(i=i.trim()).replace(/\s+/g," ")),e){var s,d=e[o],l=3;if(void 0!==d.len&&(l=d.len),void 0!==d.substrlen?s=getSubStrBuildVal(i,d.substrlen):(void 0!==d.begin?i=i.substr(d.begin):void 0!==d.flag&&(i=i.substr(i.indexOf(d.flag)+d.flag.length)),s=getAndBuildVal(i,l,d.isStr,d.trim)),void 0!==d.skipEmpty&&d.skipEmpty)s.returnVal&&isNotEmpty(s.returnVal)&&(a=buildQuote(d.name)+":"+buildQuote(genNum(s.returnVal,d.precision,d)));else{if(void 0!==d.dicName&&n){d.precision&&(s.returnVal=genNum(s.returnVal,d.precision));var p="";for(var u in n[d.dicName])if(n[d.dicName][u].valueDesc==s.returnVal){p=a=buildQuote(d.name)+":"+buildQuote(n[d.dicName][u].valueCode);break}p||(a=buildQuote(d.name)+":"+buildQuote(genNum(s.returnVal,d.precision,d)))}else isNotEmpty(s.returnVal,d.isStr)&&(a=buildQuote(d.name)+":"+buildQuote(genNum(s.returnVal,d.precision,d)));void 0!==d.name2&&d.name2&&isNotEmpty(s.returnVal)&&(a=a+","+buildQuote(d.name2)+":"+buildQuote(genNum(s.returnVal,d.precision)))}i=s.nextVal,a&&(r+=a+","),void 0!==d.double&&d.double&&(r+=(a=buildQuote(d.name+"Od")+":"+buildQuote(genNum(String(s.returnVal/2),d.precision)))+",",r+=(a=buildQuote(d.name+"Os")+":"+buildQuote(genNum(String(s.returnVal/2),d.precision)))+",")}return r}function buildQuote(e){return'"'+e+'"'}function genNum(val,precision,config){if(config&&config.formula){var tmpFormula=config.formula.replace("${val}",val),tmpVal=eval(tmpFormula);return void 0!==precision?Number.parseFloat(tmpVal).toFixed(precision):Number.parseFloat(tmpVal).toFixed(2)}return config&&config.isStr?val:void 0!==precision?Number.parseFloat(val).toFixed(precision):Number.parseFloat(val).toFixed(2)}function getAndBuildVal(e,t,n,a){var i;return{returnVal:i=(i=n?e:a?(e=e.trim()).split(" ")[0]:-1!=e.indexOf(".")?e.substr(0,e.indexOf(".")+t):e.substr(0,t)).replace(/[ ]/g,""),nextVal:e.substr(i.length)}}function getSubStrBuildVal(e,t){var n;return{returnVal:n=e.substr(0,t),nextVal:e.substr(n.length)}}function isNotEmpty(e,t){var n=!0;return t?e||(n=!1):(""==e||isNaN(Number(e)))&&(n=!1),n}function filterInvalidInfo(e,t){return t?t.forEach((function(t){e=e.replace(t.regExp,t.regExpReplaceVal)})):e=(e=e.replace(/\*/g,"")).replace(/[^\w^\.^\+^\-^\/^　+^ +]/g,","),e}function formatStrToJsonStr(e){var t=e.lastIndexOf(",");return e.length-t==1?"{"+(e=e.substring(0,t))+"}":"{"+e+"}"}function generateData(e,t,n){var a="";for(var i in t)if(0==e.replace(/[ ]/g,"").indexOf(i)){var r=e.substr(e.indexOf(i)+i.length);a+=buildData(t[i],r,n)}return a}function buildItem(e,t,n,a){var i="",r={};for(var o in a)void 0!==a[o][0].specifyCount&&(r[o]={onlyFirst:a[o][0].specifyCount,curCount:0});for(var s=0,d=e;s<d.length;s++){var l=d[s];l&&!judge(l,r)&&(i+=t(l,a,n),selfPlus(l,r))}return i}function selfPlus(e,t){var n=e.replace(/[ ]/g,"");for(var a in t)if(0==n.indexOf(a)){t[a].curCount++;break}}function judge(e,t){var n=e.replace(/[ ]/g,""),a=!1;for(var i in t)if(0==n.indexOf(i)&&t[i].onlyFirst==t[i].curCount){a=!0;break}return a}function getDicVal(e,t){if(void 0!==e.dicName&&t)for(var n=0,a=t[e.dicName];n<a.length;n++){var i=a[n];if(i.valueDesc==e.value){e.value=i.valueCode;break}}}function isValidNode(e){return!(!e||null===e||!e.childNodes.length||null===e.childNodes[0].nodeValue)}function trans2CusFields(e,t){if(e&&"{}"!==JSON.stringify(e)&&t&&"{}"!==JSON.stringify(t)){var n=Object.keys(e),a=JSON.parse(JSON.stringify(e));Object.keys(t).forEach((function(i){n.findIndex((function(e){return e==i}))>-1&&(delete a[i],a[t[i]]=e[i])})),e=a}return e}analyzeRNFmt=function(e,t,n){var a=e,i="";return i=formatStrToJsonStr(i=buildItem(n&&n.cusFilterInvalidConfig?filterInvalidInfo(a,n.cusFilterInvalidConfig).split(","):filterInvalidInfo(a).split(","),generateData,t,n)),JSON.parse(i)},analyzeJSONFmt=function(e,t,n){var a=JSON.parse(e),i=Object.keys(n),r={};return i.forEach((function(e){a[e]&&n[e].forEach((function(t){t.cusFun?r[t.name]=t.cusFun(a[e][t.index]):r[t.name]=a[e][t.index]}))})),r},analyzeXMLFmt=function(e,t,n){var a={};return n.forEach((function(n){if(Array.isArray(n.tagName)){for(var i=e,r=0;r<n.tagName.length;r++){var o=n.tagName[r];if(!i)break;i=i.getElementsByTagName(o.tagName)[o.index]}isValidNode(i)&&(n.value=i.childNodes[0].nodeValue.replace(/\s/g,""),getDicVal(n,t))}else{var s=e.getElementsByTagName(n.tagName)[n.index].childNodes[0].nodeValue;s&&(n.value=s.replace(/\s/g,""),getDicVal(n,t))}a[n.name]=0==n.value?"0":n.value})),a};var regular={"<R>SPHCYLAX":{key:"AVE",props:[{title:"SPH",field:"sphOd"},{title:"CYL",field:"cylOd"},{title:"AX",field:"axOd"}]},"<L>SPHCYLAX":{key:"AVE",props:[{title:"SPH",field:"sphOs"},{title:"CYL",field:"cylOs"},{title:"AX",field:"axOs"}]},"<R>mmDAX":[{key:"R1",props:[{title:"mm",field:""},{title:"D",field:"fkValueOd"},{title:"AX",field:"fkAxOd"}]},{key:"R2",props:[{title:"mm",field:""},{title:"D",field:"skValueOd"},{title:"AX",field:"skAxOd"}]},{key:"AVE",props:[{title:"mm",field:""},{title:"D",field:"avekValueOd"},{title:"AX",field:"avekAxOd"}]},{key:"CYL",props:[{title:"mm",field:""},{title:"D",field:"astigOd"},{title:"AX",field:""}]}],"<L>mmDAX":[{key:"R1",props:[{title:"mm",field:""},{title:"D",field:"fkValueOs"},{title:"AX",field:"fkAxOs"}]},{key:"R2",props:[{title:"mm",field:""},{title:"D",field:"skValueOs"},{title:"AX",field:"skAxOs"}]},{key:"AVE",props:[{title:"mm",field:""},{title:"D",field:"avekValueOs"},{title:"AX",field:"avekAxOs"}]},{key:"CYL",props:[{title:"mm",field:""},{title:"D",field:"astigOs"},{title:"AX",field:""}]},{key:"PD:",props:[{title:"mm",field:"pdOd",field2:"pdOs",double:!0},{title:"D",field:""},{title:"AX",field:""}]}]},analysisData;analysisData=function(e,t,n){void 0===n&&(n=regular);var a=(e=e.replace(/\n/g,"tanglv")).split("tanglv"),i={};try{for(var r=function(){var e=a[o].replace(/\s+/g,""),t=n[e];if(n[e]){var r=a[++o],s=a[o-1];if(Array.isArray(t))t.forEach((function(e){if(-1!==r.indexOf(e.key)){var t=r.replace(/\s+/g,",");t=(t=t.substring(t.indexOf(e.key)+e.key.length+1)).split(",");for(var n=0,d=0;d<e.props.length;d++){for(var l=e.props[d],p=s.indexOf(l.title),u=!1,m=0;m<l.title.length&&!u;m++)if(" "!=r.charAt(p+m)){u=!0;break}if(u){if(l.field){var c=t[Number(d)-n];0==new Number(c)&&(c="0"),l.double&&(c=Number(c)/2+""),i[l.field]=c,l.field2&&(i[l.field2]=c)}}else l.field&&(i[l.field]=""),n++}r=a[++o]}})),o--;else if(-1!==r.indexOf(t.key)){var d=r.replace(/\s+/g,",");d=(d=d.substring(d.indexOf(t.key)+t.key.length+1)).split(",");for(var l=a[o-1],p=0,u=0;u<t.props.length;u++){for(var m=t.props[u],c=l.indexOf(m.title),f=!1,_=0;_<m.title.length&&!f;_++)if(" "!=r.charAt(c+_)){f=!0;break}if(f){var y=d[Number(u)-p];0==new Number(y)&&(y="0"),m.field&&(i[m.field]=y)}else m.field&&(i[m.field]=""),p++}}}o++},o=0,s=a.length;o<s;)r()}catch(e){return!1}return i};var supore=analysisData,regular$1={FR:[{name:"sphOd",dicName:"SPH"},{name:"cylOd",dicName:"CYL"},{name:"axOd",precision:0}],FL:[{name:"sphOs",dicName:"SPH"},{name:"cylOs",dicName:"CYL"},{name:"axOs",precision:0}],VR:[{name:"dvaOd",dicName:"farSight"}],Vr:[{name:"nvaOd",dicName:"nearSight"}],VL:[{name:"dvaOs",dicName:"farSight"}],Vl:[{name:"nvaOs",dicName:"nearSight"}],AR:[{name:"addOd"}],AL:[{name:"addOs"}],PD:[{name:"dPd",len:2,double:!0,precision:1},{name:"dPdOd",len:2,skipEmpty:!0,precision:1},{name:"dPdOs",len:2,skipEmpty:!0,precision:1}],Pd:[{name:"nPd",len:2,double:!0},{name:"nPdOd",len:2,skipEmpty:!0},{name:"nPdOs",len:2,skipEmpty:!0}]},analysisData$1;analysisData$1=function(e,t,n){return void 0===n&&(n=regular$1),analyzeRNFmt(e,t,n)};var nidek_rt5100=analysisData$1,regular$2={R:[{name:"sphOd",dicName:"SPH"},{name:"cylOd",dicName:"CYL"},{name:"axisOd",precision:0}],L:[{name:"sphOs",dicName:"SPH"},{name:"cylOs",dicName:"CYL"},{name:"axisOs",precision:0}]},analysisData$2;analysisData$2=function(e,t,n){return void 0===n&&(n=regular$2),analyzeRNFmt(e,t,n)};var nidek_lm600p=analysisData$2,regular$3={OR:[{name:"sphOd",dicName:"SPH",precision:2,specifyCount:1},{name:"cylOd",dicName:"CYL",precision:2},{name:"axOd",precision:0}],OL:[{name:"sphOs",dicName:"SPH",precision:2,specifyCount:1},{name:"cylOs",dicName:"CYL",precision:2},{name:"axOs",precision:0}],DL:[{name:"fkValueOs",specifyCount:1},{name:"skValueOs"},{name:"fkAxOs",substrlen:3},{name:"avekValueOs"},{name:"astigOs"}],DR:[{name:"fkValueOd",specifyCount:2},{name:"skValueOd"},{name:"fkAxOd",substrlen:3},{name:"avekValueOd"},{name:"astigOd"}],PD:[{name:"pd",len:2,double:!0,precision:1},{name:"pdOd",len:2,skipEmpty:!0,precision:1},{name:"pdOs",len:2,skipEmpty:!0,precision:1}],SL:[{name:"corneaDiaOs",precision:1,len:2}],PL:[{name:"pupilDiaOs",precision:1,len:2}],SR:[{name:"corneaDiaOd",precision:1,len:2}],PR:[{name:"pupilDiaOd",precision:1,len:2}]},analysisData$3;analysisData$3=function(e,t,n,a){return void 0===n&&(n=regular$3),analyzeRNFmt(e,t,n,a)};var nidek_ark1=analysisData$3,regular$4={L:[{name:"iopOs",flag:"AV",len:2,precision:1}],R:[{name:"iopOd",flag:"AV",len:2,precision:1}]},analysisData$4;analysisData$4=function(e,t,n){return void 0===n&&(n=regular$4),analyzeRNFmt(e,t,n)};var nidek_nt510=analysisData$4,regular$5={OAR:[{name:"sphOd",dicName:"SPH"},{name:"cylOd",dicName:"CYL"},{name:"axOd",precision:0}],OAL:[{name:"sphOs",dicName:"SPH"},{name:"cylOs",dicName:"CYL"},{name:"axOs",precision:0}],PD:[{name:"pd",len:2,double:!0,precision:1},{name:"pdOd",len:2,skipEmpty:!0,precision:1},{name:"pdOs",len:2,skipEmpty:!0,precision:1}],CAR:[{name:"fkValueOd",begin:6,keepSpace:!0},{name:"fkAxOd",substrlen:3},{name:"skValueOd",begin:5},{name:"skAxOd",substrlen:3},{name:"avekValueOd",begin:5},{name:"astigOd"}],CAL:[{name:"fkValueOs",begin:6,keepSpace:!0},{name:"fkAxOs",substrlen:3},{name:"skValueOs",begin:5},{name:"skAxOs",substrlen:3},{name:"avekValueOs",begin:5},{name:"astigOs"}]},analysisData$5;analysisData$5=function(e,t,n){return void 0===n&&(n=regular$5),analyzeRNFmt(e,t,n)};var kr_1=analysisData$5,regular$6=[{name:"sphOd",tagName:"nsSBJ:Sph",index:0},{name:"cylOd",tagName:"nsSBJ:Cyl",index:0},{name:"axOd",tagName:"nsSBJ:Axis",index:0},{name:"sphOs",tagName:"nsSBJ:Sph",index:1},{name:"cylOs",tagName:"nsSBJ:Cyl",index:1},{name:"axOs",tagName:"nsSBJ:Axis",index:1},{name:"pdOd",tagName:[{tagName:"nsSBJ:PD",index:0},{tagName:"nsSBJ:R",index:0}],index:1},{name:"dPdOd",tagName:[{tagName:"nsSBJ:PD",index:0},{tagName:"nsSBJ:R",index:0}],index:1},{name:"pdOs",tagName:[{tagName:"nsSBJ:PD",index:0},{tagName:"nsSBJ:L",index:0}],index:1},{name:"dPdOs",tagName:[{tagName:"nsSBJ:PD",index:0},{tagName:"nsSBJ:L",index:0}],index:1},{name:"dvaOd",tagName:[{tagName:"nsSBJ:VA",index:0},{tagName:"nsSBJ:R",index:0}],index:1,dicName:"farSight"},{name:"dvaOs",tagName:[{tagName:"nsSBJ:VA",index:0},{tagName:"nsSBJ:L",index:0}],index:1,dicName:"farSight"}],analysisData$6;analysisData$6=function(e,t,n){void 0===n&&(n=regular$6);return analyzeXMLFmt(e,t,n)};var topcon_cv_5000=analysisData$6,regular$7={"ES-R-R":[{name:"sphOd",dicName:"SPH",keepSpace:!0,trim:!0},{name:"cylOd",dicName:"CYL",trim:!0},{name:"axOd",precision:0,trim:!0},{name:"pd",len:2,double:!0,precision:1,trim:!0}],"ES-R-L":[{name:"sphOs",dicName:"SPH",keepSpace:!0,trim:!0},{name:"cylOs",dicName:"CYL",trim:!0},{name:"axOs",precision:0,trim:!0},{name:"pd",len:2,double:!0,precision:1,trim:!0}]},analysisData$7;analysisData$7=function(e,t,n){void 0===n&&(n=regular$7);for(var a="",i=/[\d\+-\s\.]/,r=Object.keys(n),o=0,s=r.length;o<s;o++){var d=r[o],l=e.indexOf(d);if(l>-1){for(var p=e.substring(l+d.length),u="",m=0,c=p.length;m<c;m++){var f=p.charAt(m);if(!i.test(f)){u=p.substring(0,m);break}}a+=buildData(n[d],u,t)}}var _=formatStrToJsonStr(a);return JSON.parse(_)};var crk_8800=analysisData$7,regular$8=[{name:"axisOd",tagName:[{tagName:"AL",index:0},{tagName:"R",index:0},{tagName:"Typical",index:0},{tagName:"AxialLength",index:0}],index:0},{name:"axisOs",tagName:[{tagName:"AL",index:0},{tagName:"L",index:0},{tagName:"Typical",index:0},{tagName:"AxialLength",index:0}],index:0},{name:"keratometryFkValueOd",tagName:[{tagName:"KM",index:0},{tagName:"R",index:0},{tagName:"Typical",index:0},{tagName:"R1",index:0},{tagName:"Power",index:0}],index:0},{name:"keratometryFkAxOd",tagName:[{tagName:"KM",index:0},{tagName:"R",index:0},{tagName:"Typical",index:0},{tagName:"R1",index:0},{tagName:"Axis",index:0}],index:0},{name:"keratometrySkValueOd",tagName:[{tagName:"KM",index:0},{tagName:"R",index:0},{tagName:"Typical",index:0},{tagName:"R2",index:0},{tagName:"Power",index:0}],index:0},{name:"keratometrySkAxOd",tagName:[{tagName:"KM",index:0},{tagName:"R",index:0},{tagName:"Typical",index:0},{tagName:"R2",index:0},{tagName:"Axis",index:0}],index:0},{name:"astOd",tagName:[{tagName:"KM",index:0},{tagName:"R",index:0},{tagName:"Typical",index:0},{tagName:"Cylinder",index:0},{tagName:"Power",index:0}],index:0},{name:"astValueOd",tagName:[{tagName:"KM",index:0},{tagName:"R",index:0},{tagName:"Typical",index:0},{tagName:"Cylinder",index:0},{tagName:"Axis",index:0}],index:0},{name:"keratometryFkValueOs",tagName:[{tagName:"KM",index:0},{tagName:"L",index:0},{tagName:"Typical",index:0},{tagName:"R1",index:0},{tagName:"Power",index:0}],index:0},{name:"keratometryFkAxOs",tagName:[{tagName:"KM",index:0},{tagName:"L",index:0},{tagName:"Typical",index:0},{tagName:"R1",index:0},{tagName:"Axis",index:0}],index:0},{name:"keratometrySkValueOs",tagName:[{tagName:"KM",index:0},{tagName:"L",index:0},{tagName:"Typical",index:0},{tagName:"R2",index:0},{tagName:"Power",index:0}],index:0},{name:"keratometrySkAxOs",tagName:[{tagName:"KM",index:0},{tagName:"L",index:0},{tagName:"Typical",index:0},{tagName:"R2",index:0},{tagName:"Axis",index:0}],index:0},{name:"astOs",tagName:[{tagName:"KM",index:0},{tagName:"L",index:0},{tagName:"Typical",index:0},{tagName:"Cylinder",index:0},{tagName:"Power",index:0}],index:0},{name:"astValueOs",tagName:[{tagName:"KM",index:0},{tagName:"L",index:0},{tagName:"Typical",index:0},{tagName:"Cylinder",index:0},{tagName:"Axis",index:0}],index:0}],analysisData$8;analysisData$8=function(e,t,n){return void 0===n&&(n=regular$8),analyzeXMLFmt(e,t,n)};var nidek_al_scan=analysisData$8,regular$9=[{name:"axisOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"Al",index:0},{tagName:"Value",index:0}],index:0},{name:"axisOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"Al",index:0},{tagName:"Value",index:0}],index:0},{name:"keratometryFkValueOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"FlatK",index:0}],index:0},{name:"keratometryFkAxOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"MaximalAxis",index:0}],index:0},{name:"keratometrySkValueOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"SteepK",index:0}],index:0},{name:"keratometrySkAxOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"MinimalAxis",index:0}],index:0},{name:"astOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"DeltaD",index:0}],index:0},{name:"astValueOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"DeltaAxis",index:0}],index:0},{name:"keratometryFkValueOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"FlatK",index:0}],index:0},{name:"keratometryFkAxOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"MaximalAxis",index:0}],index:0},{name:"keratometrySkValueOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"SteepK",index:0}],index:0},{name:"keratometrySkAxOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"MinimalAxis",index:0}],index:0},{name:"astOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"DeltaD",index:0}],index:0},{name:"astValueOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"DeltaAxis",index:0}],index:0},{name:"crystalThickOd",tagName:[{tagName:"Exam",index:0},{tagName:"Od",index:0},{tagName:"Lt",index:0},{tagName:"Value",index:0}],index:0},{name:"crystalThickOs",tagName:[{tagName:"Exam",index:0},{tagName:"Os",index:0},{tagName:"Lt",index:0},{tagName:"Value",index:0}],index:0}],analysisData$9;analysisData$9=function(e,t,n){return void 0===n&&(n=regular$9),analyzeXMLFmt(e,t,n)};var iosmaster_700=analysisData$9,regular$a={r_axial_length_mean:[{name:"axisOd"}],l_axial_length_mean:[{name:"axisOs"}],r_radius_r1:[{name:"keratometryFkValueOd",formula:"3375/${val}/10"}],r_radius_r2:[{name:"keratometrySkValueOd",formula:"3375/${val}/10"}],r_radius_r1_axis:[{name:"keratometryFkAxOd"}],r_radius_r2_axis:[{name:"keratometrySkAxOd"}],r_acd_mean:[{name:"astOd"}],r_acd_cnt:[{name:"astValueOd"}],l_radius_r1:[{name:"keratometryFkValueOs",formula:"3375/${val}/10"}],l_radius_r2:[{name:"keratometrySkValueOs",formula:"3375/${val}/10"}],l_radius_r1_axis:[{name:"keratometryFkAxOs"}],l_radius_r2_axis:[{name:"keratometrySkAxOs"}],l_acd_mean:[{name:"astOs"}],l_acd_cnt:[{name:"astValueOs"}]},analysisData$a;analysisData$a=function(e,t,n){return void 0===n&&(n=regular$a),analyzeRNFmt(e,t,n)};var iosmaster_500=analysisData$a,regular$b={R:[{name:"iopOd",precision:0}],L:[{name:"iopOs",precision:0}]},analysisData$b;analysisData$b=function(e,t,n){return void 0===n&&(n=regular$b),analyzeRNFmt(e,t,n)};var topcon_ct_800=analysisData$b,regular$c={"VAOS:":[{name:"scdOs"}],"VAOD:":[{name:"scdOd"}],"VAOU:":[{name:"scdOu"}],"mode:":[{name:"mode",isStr:!0}],"rectifyMeans:":[{name:"rectifyMeans",precision:0}]},analysisData$c;analysisData$c=function(e,t,n){void 0===n&&(n=regular$c);for(var a="",i=/[\w\d\+-\s\.]/,r=Object.keys(n),o=0,s=r.length;o<s;o++){var d=r[o],l=e.indexOf(d);if(l>-1){for(var p=e.substring(l+d.length),u="",m=0,c=p.length;m<c;m++){var f=p.charAt(m);if(!i.test(f)){u=p.substring(0,m);break}m==c-1&&i.test(f)&&(u=p.substring(0,m+1))}!u&&p&&(u=p),a+=buildData(n[d],u,t)}}var _=formatStrToJsonStr(a);return JSON.parse(_)};var company=analysisData$c,regular$d={"[POWER_R]A":[{name:"sphOd",dicName:"SPH",precision:2},{name:"cylOd",dicName:"CYL",precision:2},{name:"axOd",precision:0}],"[POWER_L]A":[{name:"sphOs",dicName:"SPH",precision:2},{name:"cylOs",dicName:"CYL",precision:2},{name:"axOs",precision:0}],"[K1_R]":[{name:"DirtyData"},{name:"fkValueOd",precision:2},{name:"fkAxOd",precision:2}],"[K1_L]":[{name:"DirtyData"},{name:"fkValueOs",precision:2},{name:"fkAxOs",precision:2}],"[K2_R]":[{name:"DirtyData"},{name:"skValueOd",precision:2},{name:"skAxOd",precision:2}],"[K2_L]":[{name:"DirtyData"},{name:"skValueOs",precision:2},{name:"skAxOs",precision:2}],"[AV_R]":[{name:"DirtyData"},{name:"avekValueOd",precision:2}],"[AV_L]":[{name:"DirtyData"},{name:"avekValueOs",precision:2}],"[CYL_R]":[{name:"astigOd",precision:2}],"[CYL_L]":[{name:"astigOs",precision:2}],"[PD]":[{name:"pd",len:2,double:!0,precision:1},{name:"pdOd",len:2,skipEmpty:!0,precision:1},{name:"pdOs",len:2,skipEmpty:!0,precision:1}],cusFilterInvalidConfig:[{regExp:/\*/g,regExpReplaceVal:"",name:""},{regExp:/[,]/g,regExpReplaceVal:"",name:""},{regExp:/[^\[^\]^\w^\.^\+^\-^\/^　+^ +]/g,regExpReplaceVal:",",name:""}]},analysisData$d;analysisData$d=function(e,t,n){return void 0===n&&(n=regular$d),analyzeRNFmt(e,t,n)};var tomey_rc_5000=analysisData$d,regular$e={OS:[{name:"axOs",precision:0,index:4},{name:"cylOs",dicName:"CYL",index:5},{name:"sphOs",dicName:"SPH",index:6,cusFun:function(e,t){void 0===t&&(t=.25);var n="",a=100*t,i="string"==typeof e?Number(e):e;if(isNaN(i))return n;var r=Math.abs(i);return r=r%a<a/2?(r-r%a)/100:(r-r%a+a)/100,n=Math.abs(r)<1e-4?"0.00":i>0?"+"+r.toFixed(2):"-"+r.toFixed(2)}}],OD:[{name:"axOd",precision:0,index:4},{name:"cylOd",dicName:"CYL",index:5},{name:"sphOd",dicName:"SPH",index:6,cusFun:function(e,t){void 0===t&&(t=.25);var n="",a=100*t,i="string"==typeof e?Number(e):e;if(isNaN(i))return n;var r=Math.abs(i);return r=r%a<a/2?(r-r%a)/100:(r-r%a+a)/100,n=Math.abs(r)<1e-4?"0.00":i>0?"+"+r.toFixed(2):"-"+r.toFixed(2)}}]},analysisData$e;analysisData$e=function(e,t,n){return void 0===n&&(n=regular$e),analyzeJSONFmt(e,t,n)};var visionscreener=analysisData$e,Analysis_Map={supore:supore,"NIDEK RT-5100":nidek_rt5100,"DNIDEK/LM":nidek_lm600p,"DNIDEK/ARK":nidek_ark1,"DNIDEK/AR-1":nidek_ark1,"DNIDEK/NT-510":nidek_nt510,"DNIDEK/NT-530":nidek_nt510,"RC-5000":tomey_rc_5000,"RC-800":tomey_rc_5000,"KR-1":kr_1,"KR-800":kr_1,"RM-800":kr_1,"CV-5000":topcon_cv_5000,"AL-Scan":nidek_al_scan,"S No":crk_8800,"IOLMaster 700":iosmaster_700,"IOL MASTER500":iosmaster_500,"CT-800":topcon_ct_800,company:company,'"msg":"OK"':visionscreener};function isXml(e){return new Promise((function(t){var n=(new domParser.DOMParser).parseFromString(e,"text/xml");n.documentElement?t(n.documentElement):t(!1)}))}function isJSON(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=_typeof(t)||!t)}catch(t){return console.log("error："+e+"!!!"+t),!1}console.log("It is not a string!")}function hasAnalysisRule(e){var t=Object.keys(Analysis_Map),n=t.findIndex((function(t){return-1!==e.indexOf(t)}));return{exist:-1!==n,ruleName:t[n]}}function analysisData$f(e,t,n,a,i){return e&&t?i&&"{}"!==JSON.stringify(i)?trans2CusFields(Analysis_Map[e](t,n,a),i):Analysis_Map[e](t,n,a):null}function parseClientMsg(e,t,n,a){return new Promise((function(i){var r=hasAnalysisRule(e),o=r.exist,s=r.ruleName;o?isXml(e).then((function(r){if(r&&Array.prototype.slice.call(r.childNodes).length>0){var o=analysisData$f(s,r,t,n,a);i(o)}else{var d;(d=(isJSON(e),analysisData$f(s,e,t,n,a)))&&"{}"!==JSON.stringify(d)&&i(d)}})):i(null)}))}var AnalysisDeviceData={hasAnalysisRule:hasAnalysisRule,analysisData:analysisData$f,parseClientMsg:parseClientMsg};return AnalysisDeviceData}));
